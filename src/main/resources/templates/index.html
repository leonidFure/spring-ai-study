<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LGOREV GPT - –ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <meta name="description" content="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ò–ò –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å —Ç–µ–º–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º">
    <meta name="color-scheme" content="dark">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        body {
            color-scheme: dark;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ç–µ–Ω–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        .message-bubble {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .chat-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        
        .new-chat-button:hover,
        .send-button:hover {
            box-shadow: 0 6px 16px rgba(96, 165, 250, 0.3);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="sidebar-header">
                <h1 class="app-title">
                    <span class="app-icon">ü§ñ</span>
                    LGOREV GPT
                </h1>
                <p class="app-subtitle">–ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
            <div class="chat-list">
                <div class="chat-list-header">
                    <h3 class="chat-list-title">–ß–∞—Ç—ã</h3>
                    <div class="chat-count" th:text="${#lists.size(chats)}">0</div>
                </div>
                <div class="chat-items">
                    <div th:each="chat : ${chats}" class="chat-item" th:data-chat-id="${chat.id}">
                        <span class="chat-name" th:text="${chat.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞</span>
                        <button class="chat-delete" type="button" th:data-chat-id="${chat.id}" title="–£–¥–∞–ª–∏—Ç—å —á–∞—Ç">√ó</button>
                    </div>
                </div>
            </div>
            
            <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ -->
            <div class="new-chat-section">
                <input type="text" class="new-chat-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞" id="newChatTitle">
                <button class="new-chat-button" type="button" id="createChatBtn">
                    –ù–æ–≤—ã–π —á–∞—Ç
                </button>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
        <div class="main-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
            <div class="chat-header" id="chatHeader">
                <h2 class="current-chat-title" id="currentChatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—â–µ–Ω–∏—è</h2>
            </div>
            
            <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="chat-messages" id="chatMessages">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö -->
                <div th:each="message : ${messages}" 
                     th:class="${'message ' + (message.role.name() == 'USER' ? 'user-message' : 'ai-message')}">
                    <div class="message-avatar">
                        <div class="avatar-icon" th:if="${message.role.name() == 'USER'}">üë§</div>
                        <div class="avatar-icon" th:if="${message.role.name() != 'USER'}">ü§ñ</div>
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author" th:text="${message.role.name() == 'USER' ? '–í—ã' : '–ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç'}">–ê–≤—Ç–æ—Ä</span>
                            <span class="message-time" th:text="${#temporals.format(message.createdAt, 'HH:mm')}">–í—Ä–µ–º—è</span>
                        </div>
                        <div th:class="${'message-bubble ' + (message.role.name() == 'USER' ? 'user-bubble' : 'ai-bubble')}">
                            <div class="message-text" th:utext="${message.content}"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π -->
                <div th:if="${messages.isEmpty()}" class="no-messages">
                    <div class="no-messages-content">
                        <div class="no-messages-icon">üí¨</div>
                        <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ LGOREV GPT!</h3>
                        <p>–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥, –æ—Ç–ø—Ä–∞–≤–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∏–∂–µ</p>
                        <div class="suggestions">
                            <div class="suggestion-item">–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ</div>
                            <div class="suggestion-item">–ü–æ–º–æ–≥–∏ —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º</div>
                            <div class="suggestion-item">–û–±—ä—è—Å–Ω–∏ —Å–ª–æ–∂–Ω—É—é —Ç–µ–º—É</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="message-input-container">
                <div class="message-input-wrapper">
                    <input type="text" class="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." id="messageInput">
                    <button class="send-button" type="button" id="sendMessageBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —á–∞—Ç?</p>
            <div class="modal-buttons">
                <button class="btn-cancel" type="button">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-confirm" type="button">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script th:src="@{/js/app.js}"></script>
    <script th:if="${lastChatId != null}">
        // –ü–µ—Ä–µ–¥–∞–µ–º ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∞—Ç–∞ –≤ JavaScript
        window.lastChatId = /*[[${lastChatId}]]*/ null;
    </script>
</body>
</html>
